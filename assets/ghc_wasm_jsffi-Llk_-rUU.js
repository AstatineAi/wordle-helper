import{_ as __vitePreload}from"./index-DWZcvJs3.js";const __viteBrowserExternal=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class JSValManager{#a=0;#e=new Map;newJSVal(l){const o=++this.#a;return this.#e.set(o,l),o}getJSVal(l){if(!this.#e.has(l))throw new WebAssembly.RuntimeError(`getJSVal(${l})`);return this.#e.get(l)}freeJSVal(l){if(!this.#e.delete(l))throw new WebAssembly.RuntimeError(`freeJSVal(${l})`)}}const setImmediate=await(async()=>{if(globalThis.setImmediate)return globalThis.setImmediate;if(globalThis.Deno)try{return(await __vitePreload(async()=>{const{setImmediate:t}=await Promise.resolve().then(()=>__viteBrowserExternal);return{setImmediate:t}},void 0)).setImmediate}catch{}if(globalThis.scheduler)return(t,...l)=>scheduler.postTask(()=>t(...l));if(globalThis.MessageChannel){class t{#a=[];#e=new MessageChannel;constructor(){this.#e.port1.addEventListener("message",()=>{this.#a.pop()()}),this.#e.port1.start()}setImmediate(u,...m){this.#a.push(()=>u(...m)),this.#e.port2.postMessage(void 0)}}const l=new t;return(o,...u)=>l.setImmediate(o,...u)}return(t,...l)=>setTimeout(t,0,...l)})(),ghc_wasm_jsffi=__exports=>{const __ghc_wasm_jsffi_jsval_manager=new JSValManager,__ghc_wasm_jsffi_finalization_registry=globalThis.FinalizationRegistry?new FinalizationRegistry(t=>__exports.rts_freeStablePtr(t)):{register:()=>{},unregister:()=>!0};return{newJSVal:t=>__ghc_wasm_jsffi_jsval_manager.newJSVal(t),getJSVal:t=>__ghc_wasm_jsffi_jsval_manager.getJSVal(t),freeJSVal:t=>__ghc_wasm_jsffi_jsval_manager.freeJSVal(t),scheduleWork:()=>setImmediate(__exports.rts_schedulerLoop),ZC0ZCjsaddlezmwasmzm0zi1zi2zi1zm3daa754d9183e4f08ecc66ae16bddecdf7b4a8e65e4e87c83a8008f1dc834a03ZCLanguageziJavascriptziJSaddleziWasmziInternalZC:(t,l)=>new TextDecoder("utf-8",{fatal:!0}).decode(new Uint8Array(__exports.memory.buffer,t,l)),ZC1ZCjsaddlezmwasmzm0zi1zi2zi1zm3daa754d9183e4f08ecc66ae16bddecdf7b4a8e65e4e87c83a8008f1dc834a03ZCLanguageziJavascriptziJSaddleziWasmziInternalZC:(t,l,o)=>new TextEncoder().encodeInto(t,new Uint8Array(__exports.memory.buffer,l,o)).written,ZC2ZCjsaddlezmwasmzm0zi1zi2zi1zm3daa754d9183e4f08ecc66ae16bddecdf7b4a8e65e4e87c83a8008f1dc834a03ZCLanguageziJavascriptziJSaddleziWasmziInternalZC:t=>t.length,ZC6ZCjsaddlezmwasmzm0zi1zi2zi1zm3daa754d9183e4f08ecc66ae16bddecdf7b4a8e65e4e87c83a8008f1dc834a03ZCLanguageziJavascriptziJSaddleziWasmziInternalZC:t=>((...l)=>__exports.ghczuwasmzujsffiZC5ZCjsaddlezmwasmzm0zi1zi2zi1zm3daa754d9183e4f08ecc66ae16bddecdf7b4a8e65e4e87c83a8008f1dc834a03ZCLanguageziJavascriptziJSaddleziWasmziInternalZC(t,...l)),ZC8ZCjsaddlezmwasmzm0zi1zi2zi1zm3daa754d9183e4f08ecc66ae16bddecdf7b4a8e65e4e87c83a8008f1dc834a03ZCLanguageziJavascriptziJSaddleziWasmziInternalZC:t=>((...l)=>__exports.ghczuwasmzujsffiZC7ZCjsaddlezmwasmzm0zi1zi2zi1zm3daa754d9183e4f08ecc66ae16bddecdf7b4a8e65e4e87c83a8008f1dc834a03ZCLanguageziJavascriptziJSaddleziWasmziInternalZC(t,...l)),ZC10ZCjsaddlezmwasmzm0zi1zi2zi1zm3daa754d9183e4f08ecc66ae16bddecdf7b4a8e65e4e87c83a8008f1dc834a03ZCLanguageziJavascriptziJSaddleziWasmziInternalZC:t=>((...l)=>__exports.ghczuwasmzujsffiZC9ZCjsaddlezmwasmzm0zi1zi2zi1zm3daa754d9183e4f08ecc66ae16bddecdf7b4a8e65e4e87c83a8008f1dc834a03ZCLanguageziJavascriptziJSaddleziWasmziInternalZC(t,...l)),ZC11ZCjsaddlezmwasmzm0zi1zi2zi1zm3daa754d9183e4f08ecc66ae16bddecdf7b4a8e65e4e87c83a8008f1dc834a03ZCLanguageziJavascriptziJSaddleziWasmziInternalZC:async($1,$2,$3)=>{var jsaddle_values=new Map,jsaddle_free=new Map;jsaddle_values.set(0,null),jsaddle_values.set(1,void 0),jsaddle_values.set(2,!1),jsaddle_values.set(3,!0),jsaddle_values.set(4,globalThis);var jsaddle_index=100,expectedBatch=1,lastResults=[0,{tag:"Success",contents:[[],[]]}],inCallback=0,asyncBatch=null,syncDepth=0;(async()=>{for(;;){const batch=JSON.parse(await $3());var runBatch=function(firstBatch,initialSyncDepth){var processBatch=function(timestamp){var batch=firstBatch,callbacksToFree=[],results=[];inCallback++;try{for(syncDepth=initialSyncDepth||0;;)if(batch[2]===expectedBatch){expectedBatch++;for(var nCommandsLength=batch[0].length,nCommand=0;nCommand!=nCommandsLength;nCommand++){var cmd=batch[0][nCommand];if(cmd.Left){var d=cmd.Left;switch(d.tag){case"FreeRef":var refsToFree=jsaddle_free.get(d.contents[0])||[];refsToFree.push(d.contents[1]),jsaddle_free.set(d.contents[0],refsToFree);break;case"FreeRefs":for(var refsToFree=jsaddle_free.get(d.contents)||[],nRef=0;nRef!=refsToFree.length;nRef++)jsaddle_values.delete(refsToFree[nRef]);jsaddle_free.delete(d.contents);break;case"SetPropertyByName":jsaddle_values.get(d.contents[0])[d.contents[1]]=jsaddle_values.get(d.contents[2]);break;case"SetPropertyAtIndex":jsaddle_values.get(d.contents[0])[d.contents[1]]=jsaddle_values.get(d.contents[2]);break;case"EvaluateScript":var n=d.contents[1];jsaddle_values.set(n,eval(d.contents[0]));break;case"StringToValue":var n=d.contents[1];jsaddle_values.set(n,d.contents[0]);break;case"JSONValueToValue":var n=d.contents[1];jsaddle_values.set(n,d.contents[0]);break;case"GetPropertyByName":var n=d.contents[2];jsaddle_values.set(n,jsaddle_values.get(d.contents[0])[d.contents[1]]);break;case"GetPropertyAtIndex":var n=d.contents[2];jsaddle_values.set(n,jsaddle_values.get(d.contents[0])[d.contents[1]]);break;case"NumberToValue":var n=d.contents[1];jsaddle_values.set(n,d.contents[0]);break;case"NewEmptyObject":var n=d.contents;jsaddle_values.set(n,{});break;case"NewAsyncCallback":(function(){var t=d.contents,l=function(){var o=++jsaddle_index;jsaddle_values.set(o,l);var u=++jsaddle_index;jsaddle_values.set(u,this);for(var m=[],z=0;z!=arguments.length;z++){var g=++jsaddle_index;jsaddle_values.set(g,arguments[z]),m[z]=g}$1(JSON.stringify({tag:"Callback",contents:[lastResults[0],lastResults[1],t,o,u,m]}))};jsaddle_values.set(t,l)})();break;case"NewSyncCallback":(function(){var t=d.contents,l=function(){var o=++jsaddle_index;jsaddle_values.set(o,l);var u=++jsaddle_index;jsaddle_values.set(u,this);for(var m=[],z=0;z!=arguments.length;z++){var g=++jsaddle_index;jsaddle_values.set(g,arguments[z]),m[z]=g}inCallback>0?$1(JSON.stringify({tag:"Callback",contents:[lastResults[0],lastResults[1],t,o,u,m]})):runBatch(JSON.parse($2(JSON.stringify({tag:"Callback",contents:[lastResults[0],lastResults[1],t,o,u,m]}))),1)};jsaddle_values.set(t,l)})();break;case"FreeCallback":callbacksToFree.push(d.contents);break;case"CallAsFunction":var n=d.contents[3];jsaddle_values.set(n,jsaddle_values.get(d.contents[0]).apply(jsaddle_values.get(d.contents[1]),d.contents[2].map(function(t){return jsaddle_values.get(t)})));break;case"CallAsConstructor":var n=d.contents[2],r,f=jsaddle_values.get(d.contents[0]),a=d.contents[1].map(function(t){return jsaddle_values.get(t)});switch(a.length){case 0:r=new f;break;case 1:r=new f(a[0]);break;case 2:r=new f(a[0],a[1]);break;case 3:r=new f(a[0],a[1],a[2]);break;case 4:r=new f(a[0],a[1],a[2],a[3]);break;case 5:r=new f(a[0],a[1],a[2],a[3],a[4]);break;case 6:r=new f(a[0],a[1],a[2],a[3],a[4],a[5]);break;case 7:r=new f(a[0],a[1],a[2],a[3],a[4],a[5],a[6]);break;default:var ret,temp=function(){ret=f.apply(this,a)};temp.prototype=f.prototype;var i=new temp;ret instanceof Object?r=ret:(i.constructor=f,r=i)}jsaddle_values.set(n,r);break;case"NewArray":var n=d.contents[1];jsaddle_values.set(n,d.contents[0].map(function(t){return jsaddle_values.get(t)}));break;case"SyncWithAnimationFrame":var n=d.contents;jsaddle_values.set(n,timestamp);break;case"StartSyncBlock":syncDepth++;break;case"EndSyncBlock":syncDepth--;break;default:$1(JSON.stringify({tag:"ProtocolError",contents:e.data}));return}}else{var d=cmd.Right;switch(d.tag){case"ValueToString":var val=jsaddle_values.get(d.contents),s=val===null?"null":val===void 0?"undefined":val.toString();results.push({tag:"ValueToStringResult",contents:s});break;case"ValueToBool":results.push({tag:"ValueToBoolResult",contents:!!jsaddle_values.get(d.contents)});break;case"ValueToNumber":results.push({tag:"ValueToNumberResult",contents:Number(jsaddle_values.get(d.contents))});break;case"ValueToJSON":var s=jsaddle_values.get(d.contents)===void 0?"":JSON.stringify(jsaddle_values.get(d.contents));results.push({tag:"ValueToJSONResult",contents:s});break;case"ValueToJSONValue":results.push({tag:"ValueToJSONValueResult",contents:jsaddle_values.get(d.contents)});break;case"DeRefVal":var n=d.contents,v=jsaddle_values.get(n),c=v===null?[0,""]:v===void 0?[1,""]:v===!1?[2,""]:v===!0?[3,""]:typeof v=="number"?[-1,v.toString()]:typeof v=="string"?[-2,v]:[-3,""];results.push({tag:"DeRefValResult",contents:c});break;case"IsNull":results.push({tag:"IsNullResult",contents:jsaddle_values.get(d.contents)===null});break;case"IsUndefined":results.push({tag:"IsUndefinedResult",contents:jsaddle_values.get(d.contents)===void 0});break;case"InstanceOf":results.push({tag:"InstanceOfResult",contents:jsaddle_values.get(d.contents[0])instanceof jsaddle_values.get(d.contents[1])});break;case"StrictEqual":results.push({tag:"StrictEqualResult",contents:jsaddle_values.get(d.contents[0])===jsaddle_values.get(d.contents[1])});break;case"PropertyNames":var result=[];for(name in jsaddle_values.get(d.contents))result.push(name);results.push({tag:"PropertyNamesResult",contents:result});break;case"Sync":results.push({tag:"SyncResult",contents:[]});break;default:results.push({tag:"ProtocolError",contents:e.data})}}}if(syncDepth<=0){lastResults=[batch[2],{tag:"Success",contents:[callbacksToFree,results]}],$1(JSON.stringify({tag:"BatchResults",contents:[lastResults[0],lastResults[1]]}));break}else lastResults=[batch[2],{tag:"Success",contents:[callbacksToFree,results]}],batch=JSON.parse($2(JSON.stringify({tag:"BatchResults",contents:[lastResults[0],lastResults[1]]}))),results=[],callbacksToFree=[]}else{if(syncDepth<=0)break;batch[2]===expectedBatch-1?batch=JSON.parse($2(JSON.stringify({tag:"BatchResults",contents:[lastResults[0],lastResults[1]]}))):batch=JSON.parse($2(JSON.stringify({tag:"Duplicate",contents:[batch[2],expectedBatch]}))),results=[],callbacksToFree=[]}}catch(t){var n=++jsaddle_index;jsaddle_values.set(n,t),console.log(t),$1(JSON.stringify({tag:"BatchResults",contents:[batch[2],{tag:"Failure",contents:[callbacksToFree,results,n,String(t)]}]}))}if(inCallback==1)for(;asyncBatch!==null;){var b=asyncBatch;asyncBatch=null,b[2]==expectedBatch&&runBatch(b)}inCallback--};batch[1]&&(initialSyncDepth||0)===0?globalThis.requestAnimationFrame(processBatch):processBatch(globalThis.performance?globalThis.performance.now():null)};runBatch(batch)}})()},ZC12ZCjsaddlezmwasmzm0zi1zi2zi1zm3daa754d9183e4f08ecc66ae16bddecdf7b4a8e65e4e87c83a8008f1dc834a03ZCLanguageziJavascriptziJSaddleziWasmziInternalZC:async()=>{globalThis.h$isNumber=function(t){return typeof t=="number"},globalThis.h$isObject=function(t){return typeof t=="object"},globalThis.h$isString=function(t){return typeof t=="string"},globalThis.h$isSymbol=function(t){return typeof t=="symbol"},globalThis.h$isBoolean=function(t){return typeof t=="boolean"},globalThis.h$isFunction=function(t){return typeof t=="function"},globalThis.h$jsTypeOf=function(t){var l=typeof t;return l==="undefined"?0:l==="object"?1:l==="boolean"?2:l==="number"?3:l==="string"?4:l==="symbol"?5:l==="function"?6:7},globalThis.h$jsonTypeOf=function(t){return t instanceof Object?Object.prototype.toString.call(t)=="[object Array]"?5:t?6:0:t==null?0:typeof t=="number"?h$isInteger(t)?1:2:typeof t=="boolean"?3:4},globalThis.h$roundUpToMultipleOf=function(t,l){var o=t%l;return o===0?t:t-o+l},globalThis.h$newByteArray=function(t){var l=Math.max(h$roundUpToMultipleOf(t,8),8),o=new ArrayBuffer(l);return{buf:o,len:t,i3:new Int32Array(o),u8:new Uint8Array(o),u1:new Uint16Array(o),f3:new Float32Array(o),f6:new Float64Array(o),dv:new DataView(o)}},globalThis.h$wrapBuffer=function(t,l,o,u){if(!l&&o&&o%8!==0)throw"h$wrapBuffer: offset not aligned:"+o;if(!t||!(t instanceof ArrayBuffer))throw"h$wrapBuffer: not an ArrayBuffer";return o||(o=0),(!u||u<0)&&(u=t.byteLength-o),{buf:t,len:u,i3:o%4?null:new Int32Array(t,o,u>>2),u8:new Uint8Array(t,o,u),u1:o%2?null:new Uint16Array(t,o,u>>1),f3:o%4?null:new Float32Array(t,o,u>>2),f6:o%8?null:new Float64Array(t,o,u>>3),dv:new DataView(t,o,u)}},globalThis.h$newByteArrayFromBase64String=function(t){for(var l=globalThis.atob(t),o=h$newByteArray(l.length),u=o.u8,m=0;m<l.length;m++)u[m]=l.charCodeAt(m);return o},globalThis.h$byteArrayToBase64String=function(t,l,o){for(var u="",m=o.u8,z=t+l,g=t;g<z;g++)u+=String.fromCharCode(m[g]);return globalThis.btoa(u)}},ZC0ZCghczminternalZCGHCziInternalziWasmziPrimziExportsZC:(t,l)=>t.reject(new WebAssembly.RuntimeError(l)),ZC18ZCghczminternalZCGHCziInternalziWasmziPrimziExportsZC:(t,l)=>t.resolve(l),ZC19ZCghczminternalZCGHCziInternalziWasmziPrimziExportsZC:t=>t.resolve(),ZC20ZCghczminternalZCGHCziInternalziWasmziPrimziExportsZC:t=>{t.throwTo=()=>{}},ZC21ZCghczminternalZCGHCziInternalziWasmziPrimziExportsZC:(t,l)=>{t.throwTo=o=>__exports.rts_promiseThrowTo(l,o)},ZC22ZCghczminternalZCGHCziInternalziWasmziPrimziExportsZC:()=>{let t,l;const o=new Promise((u,m)=>{t=u,l=m});return o.resolve=t,o.reject=l,o},ZC23ZCghczminternalZCGHCziInternalziWasmziPrimziExportsZC:(t,l)=>__ghc_wasm_jsffi_finalization_registry.register(t,l,t),ZC18ZCghczminternalZCGHCziInternalziWasmziPrimziImportsZC:(t,l)=>t.then(()=>__exports.rts_promiseResolveUnit(l),o=>__exports.rts_promiseReject(l,o)),ZC0ZCghczminternalZCGHCziInternalziWasmziPrimziTypesZC:t=>`${t.stack?t.stack:t}`,ZC1ZCghczminternalZCGHCziInternalziWasmziPrimziTypesZC:(t,l)=>new TextDecoder("utf-8",{fatal:!0}).decode(new Uint8Array(__exports.memory.buffer,t,l)),ZC2ZCghczminternalZCGHCziInternalziWasmziPrimziTypesZC:(t,l,o)=>new TextEncoder().encodeInto(t,new Uint8Array(__exports.memory.buffer,l,o)).written,ZC3ZCghczminternalZCGHCziInternalziWasmziPrimziTypesZC:t=>t.length,ZC4ZCghczminternalZCGHCziInternalziWasmziPrimziTypesZC:t=>{try{__ghc_wasm_jsffi_finalization_registry.unregister(t)}catch{}},ZC0ZCghczminternalZCGHCziInternalziWasmziPrimziConcziInternalZC:async t=>new Promise(l=>setTimeout(l,t/1e3))}};export{ghc_wasm_jsffi as default};
